
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#eef1f4}
#authBox{position:fixed;inset:0;display:flex;align-items:center;justify-content:center}
#appFrame{display:none;width:100vw;height:100vh;border:none}
.box{background:#fff;padding:20px;border-radius:6px;width:320px;text-align:center}
input,button{width:100%;padding:8px;margin:6px 0}
</style>
</head>
<body>

<div id="authBox">
  <div class="box">
    <h3>Login</h3>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button id="loginBtn">Login</button>
    <button id="regBtn">New User Register</button>
  </div>
</div>

<iframe id="appFrame" src="index.html"></iframe>

<script>
const auth=firebase.auth(),db=firebase.firestore();

loginBtn.onclick=()=>{
 auth.signInWithEmailAndPassword(email.value,password.value)
 .catch(e=>alert(e.message));
};

regBtn.onclick=()=>{
 auth.createUserWithEmailAndPassword(email.value,password.value)
 .then(r=>db.collection("users").doc(r.user.uid).set({email:r.user.email,created:new Date()}))
 .then(()=>alert("User Registered"))
 .catch(e=>alert(e.message));
};

auth.onAuthStateChanged(u=>{
 if(u){
  authBox.style.display="none";
  appFrame.style.display="block";
 }
});
</script>

</body>
</html>
